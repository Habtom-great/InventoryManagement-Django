
{% extends "bill_base.html" %}
{% load static %}

{% block title %}Sale Invoice No: {{ bill.billno }}{% endblock %}

{% block content %}
<div style="font-family: 'Arial', sans-serif; color:#333; width:850px; margin:auto;">

    <!-- Invoice Header -->
    <div style="text-align:center; margin-bottom:20px;">
        <h1 style="font-weight:bold; font-size:32px; margin:0; color:#000;">SALE INVOICE</h1>
    </div>

    <!-- Seller & Buyer Info -->
    <table style="width:100%; border-collapse: collapse; margin-bottom:20px;">
        <tr>
            <td style="width:50%; vertical-align: top; padding:10px; border:1px solid #333;">
                <strong>Seller:</strong><br>
                GIIMS<br>
                Dealers in: Products<br>
                Address: Bole Center Street, AA, OR 00882<br>
                Email: gerarisaac@mail.com<br>
                TIN/GSTIN: 123456789CASTR0
            </td>
            <td style="width:50%; vertical-align: top; padding:10px; border:1px solid #333;">
                <strong>Buyer / Consignee:</strong><br>
                {{ bill.customer_name|default:"-" }}<br>
                Address: {{ billdetails.address|linebreaks|default:"-" }}<br>
                Invoice No: {{ bill.billno|default:"-" }}<br>
                Date: {{ bill.date|date:"M. d, Y" }}<br>
                PO No & Date: {{ billdetails.po|default:"-" }}<br>
                Destination: {{ billdetails.destination|default:"-" }}<br>
                TIN/GSTIN: {{ billdetails.tin|default:"-" }}
            </td>
        </tr>
    </table>

    <!-- Items Table -->
    <table style="width:100%; border-collapse: collapse; border:1px solid #333; margin-bottom:20px;">
        <thead>
            <tr style="background:#f2f2f2;">
                <th style="border:1px solid #333; padding:6px;">SL</th>
                <th style="border:1px solid #333; padding:6px;">Description</th>
                <th style="border:1px solid #333; padding:6px;">UOM</th>
                <th style="border:1px solid #333; padding:6px;">Qty</th>
                <th style="border:1px solid #333; padding:6px;">Unit Price</th>
                <th style="border:1px solid #333; padding:6px;">Amount</th>
                <th style="border:1px solid #333; padding:6px;">PS</th>
            </tr>
        </thead>
        <tbody>
            {% for item in items %}
            <tr>
                <td style="border:1px solid #333; text-align:center;">{{ forloop.counter }}</td>
                <td style="border:1px solid #333; padding:5px;">{{ item.stock.name|default:"-" }}</td>
                <td style="border:1px solid #333; padding:5px;">-</td>
                <td style="border:1px solid #333; text-align:center;">{{ item.quantity|default:"0" }}</td>
                <td style="border:1px solid #333; text-align:right;">{{ item.perprice|floatformat:2 }}</td>
                <td style="border:1px solid #333; text-align:right;">{{ item.totalprice|floatformat:2 }}</td>
                <td style="border:1px solid #333; text-align:center;">0</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="7" style="border:1px solid #333; text-align:center;">No items found</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- Totals -->
    <table style="width:50%; float:right; border-collapse: collapse; margin-bottom:30px;">
        <tr>
            <td style="padding:6px;"><strong>Subtotal:</strong></td>
            <td style="padding:6px; text-align:right;">{{ subtotal|floatformat:2 }} Birr</td>
        </tr>
        <tr>
            <td style="padding:6px;"><strong>VAT (15%):</strong></td>
            <td style="padding:6px; text-align:right;">{{ vat|floatformat:2 }} Birr</td>
        </tr>
        <tr>
            <td style="padding:6px;"><strong>Withholding (3%):</strong></td>
            <td style="padding:6px; text-align:right;">{{ withhold|floatformat:2 }} Birr</td>
        </tr>
        <tr style="background:#f2f2f2;">
            <td style="padding:6px;"><strong>Net Total:</strong></td>
            <td style="padding:6px; text-align:right;"><strong>{{ net_total|floatformat:2 }} Birr</strong></td>
        </tr>
        <tr>
            <td colspan="2" style="padding:6px;"><strong>Amount in Words:</strong> {{ amount_in_words }}</td>
        </tr>
    </table>

    <div style="clear:both;"></div>

    <!-- Signature -->
    <div style="width:100%; margin-top:50px; text-align:center;">
        <strong>For Company</strong><br><br><br><br>
        Name: ______________________<br>
        Signatory: ______________________
    </div>

    <!-- Buttons -->
    <div style="text-align:center; margin-top:30px;">
        <button class="btn btn-primary" onclick="window.print()">Print</button>
        <a href="{% url 'transactions:sales-list' %}" class="btn btn-secondary">Go Back</a>
    </div>

</div>
{% endblock %}
